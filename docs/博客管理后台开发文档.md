# åšå®¢ç®¡ç†åå°å¼€å‘æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº NestJS æ„å»ºçš„ç°ä»£åŒ–åšå®¢åç«¯ç³»ç»Ÿï¼Œæä¾›å®Œæ•´çš„ç®¡ç†åå°åŠŸèƒ½ã€‚ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–æ¶æ„ï¼Œæ”¯æŒç”¨æˆ·ç®¡ç†ã€åšå®¢ç®¡ç†ã€åˆ†ç±»ç®¡ç†ã€è¯„è®ºç®¡ç†ã€äº‘å‡½æ•°ç®¡ç†ã€æ–‡ä»¶ä¸Šä¼ ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

### æŠ€æœ¯æ ˆ
- **åç«¯æ¡†æ¶**: NestJS + TypeScript
- **æ•°æ®åº“**: MySQL + TypeORM
- **ç¼“å­˜**: Redis
- **è®¤è¯**: JWT + OAuth 2.0 (Google, GitHub)
- **æ–‡æ¡£**: Swagger/OpenAPI 3.0
- **æ–‡ä»¶ä¸Šä¼ **: Multer

### é¡¹ç›®ç‰¹æ€§
- ğŸ” å®Œæ•´çš„ç”¨æˆ·è®¤è¯å’Œæˆæƒç³»ç»Ÿ
- ğŸ‘¥ åŸºäºè§’è‰²çš„æƒé™ç®¡ç† (RBAC)
- ğŸ“ åšå®¢å†…å®¹ç®¡ç†ç³»ç»Ÿ
- ğŸ’¬ è¯„è®ºç³»ç»Ÿï¼ˆæ”¯æŒåµŒå¥—å›å¤ï¼‰
- ğŸ·ï¸ åˆ†ç±»å’Œæ ‡ç­¾ç®¡ç†
- â˜ï¸ äº‘å‡½æ•°ç³»ç»Ÿï¼ˆæ”¯æŒ JSON æ•°æ®å’Œ JavaScript å‡½æ•°ï¼‰
- ğŸ“ æ–‡ä»¶ä¸Šä¼ å’Œç®¡ç†
- âš™ï¸ ç³»ç»Ÿè®¾ç½®ç®¡ç†
- ğŸ“Š ç»Ÿè®¡å’Œåˆ†æåŠŸèƒ½

## API åŸºç¡€ä¿¡æ¯

### åŸºç¡€ URL
```
å¼€å‘ç¯å¢ƒ: http://localhost:3000/api
ç”Ÿäº§ç¯å¢ƒ: https://your-domain.com/api
```

### è®¤è¯æ–¹å¼
å¤§éƒ¨åˆ† API éœ€è¦ JWT è®¤è¯ï¼Œè¯·åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ ï¼š
```
Authorization: Bearer <your-jwt-token>
```

### å“åº”æ ¼å¼
æ‰€æœ‰ API å“åº”éƒ½éµå¾ªç»Ÿä¸€æ ¼å¼ï¼š
```json
{
  "success": true,
  "data": {},
  "message": "æ“ä½œæˆåŠŸ",
  "timestamp": "2024-01-01T00:00:00.000Z"
}
```

## æ ¸å¿ƒæ¨¡å—è¯¦è§£

### 1. è®¤è¯ç®¡ç†æ¨¡å— (Auth)

#### ä¸»è¦åŠŸèƒ½
- ç”¨æˆ·æ³¨å†Œ/ç™»å½•
- JWT Token ç®¡ç†
- OAuth 2.0 é›†æˆ (Google, GitHub)
- å¯†ç é‡ç½®
- åšå®¢åˆå§‹åŒ–æ£€æŸ¥

#### å…³é”®æ¥å£

**ç”¨æˆ·æ³¨å†Œ**
```http
POST /api/auth/register
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123",
  "username": "username",
  "nickname": "æ˜µç§°"
}
```

**ç”¨æˆ·ç™»å½•**
```http
POST /api/auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123"
}
```

**åˆ·æ–° Token**
```http
POST /api/auth/refresh
Content-Type: application/json

{
  "refreshToken": "your-refresh-token"
}
```

**è·å–ç”¨æˆ·ä¿¡æ¯**
```http
GET /api/auth/profile
Authorization: Bearer <token>
```

**æ£€æŸ¥åšå®¢åˆå§‹åŒ–çŠ¶æ€**
```http
GET /api/auth/check-initialization
```

**ç®¡ç†å‘˜æ³¨å†Œï¼ˆä»…é¦–æ¬¡åˆå§‹åŒ–ï¼‰**
```http
POST /api/auth/admin-register
Content-Type: application/json

{
  "email": "admin@example.com",
  "password": "admin123",
  "username": "admin",
  "nickname": "ç®¡ç†å‘˜"
}
```

### 2. ç”¨æˆ·ç®¡ç†æ¨¡å— (Users)

#### æ•°æ®æ¨¡å‹
```typescript
interface User {
  id: number;
  email: string;
  username: string;
  nickname: string;
  avatar: string;
  bio: string;
  status: 'active' | 'inactive' | 'banned';
  provider: 'local' | 'google' | 'github';
  emailVerified: boolean;
  roles: Role[];
  createdAt: Date;
  updatedAt: Date;
}
```

#### å…³é”®æ¥å£

**è·å–ç”¨æˆ·åˆ—è¡¨**
```http
GET /api/users?page=1&limit=10&status=active&search=å…³é”®è¯
Authorization: Bearer <token>
```

**è·å–ç”¨æˆ·è¯¦æƒ…**
```http
GET /api/users/{id}
Authorization: Bearer <token>
```

**æ›´æ–°ç”¨æˆ·ä¿¡æ¯**
```http
PATCH /api/users/{id}
Authorization: Bearer <token>
Content-Type: application/json

{
  "nickname": "æ–°æ˜µç§°",
  "bio": "ä¸ªäººç®€ä»‹",
  "status": "active"
}
```

**è·å–ç”¨æˆ·ç»Ÿè®¡**
```http
GET /api/users/stats
Authorization: Bearer <token>
```

### 3. åšå®¢ç®¡ç†æ¨¡å— (Blogs)

#### æ•°æ®æ¨¡å‹
```typescript
interface Blog {
  id: number;
  title: string;
  slug: string;
  summary: string;
  content: string;
  coverImage: string;
  status: 'draft' | 'published' | 'archived';
  viewCount: number;
  likeCount: number;
  commentCount: number;
  isTop: boolean;
  allowComment: boolean;
  tags: string[];
  seoKeywords: string[];
  seoDescription: string;
  publishedAt: Date;
  author: User;
  categories: Category[];
  createdAt: Date;
  updatedAt: Date;
}
```

#### å…³é”®æ¥å£

**åˆ›å»ºåšå®¢**
```http
POST /api/blogs
Authorization: Bearer <token>
Content-Type: application/json

{
  "title": "åšå®¢æ ‡é¢˜",
  "content": "åšå®¢å†…å®¹",
  "summary": "æ‘˜è¦",
  "status": "draft",
  "tags": ["æ ‡ç­¾1", "æ ‡ç­¾2"],
  "categoryIds": [1, 2],
  "coverImage": "å°é¢å›¾ç‰‡URL",
  "seoKeywords": ["å…³é”®è¯1", "å…³é”®è¯2"],
  "seoDescription": "SEOæè¿°"
}
```

**è·å–åšå®¢åˆ—è¡¨ï¼ˆå…¬å¼€ï¼‰**
```http
GET /api/blogs?page=1&limit=10&status=published&search=å…³é”®è¯&categoryId=1&tag=æ ‡ç­¾&sortBy=createdAt&sortOrder=DESC
```

**ç®¡ç†å‘˜è·å–åšå®¢åˆ—è¡¨**
```http
GET /api/blogs/admin?page=1&limit=10&status=all&authorId=1
Authorization: Bearer <token>
```

**è·å–åšå®¢è¯¦æƒ…**
```http
GET /api/blogs/{id}
```

**æ›´æ–°åšå®¢**
```http
PATCH /api/blogs/{id}
Authorization: Bearer <token>
Content-Type: application/json

{
  "title": "æ›´æ–°çš„æ ‡é¢˜",
  "content": "æ›´æ–°çš„å†…å®¹",
  "status": "published"
}
```

**åˆ é™¤åšå®¢**
```http
DELETE /api/blogs/{id}
Authorization: Bearer <token>
```

**åšå®¢ç‚¹èµ/å–æ¶ˆç‚¹èµ**
```http
POST /api/blogs/{id}/like
DELETE /api/blogs/{id}/like
```

### 4. åˆ†ç±»ç®¡ç†æ¨¡å— (Categories)

#### æ•°æ®æ¨¡å‹
```typescript
interface Category {
  id: number;
  name: string;
  slug: string;
  description: string;
  color: string;
  icon: string;
  isActive: boolean;
  sortOrder: number;
  blogCount: number;
  parent: Category;
  children: Category[];
  createdAt: Date;
  updatedAt: Date;
}
```

#### å…³é”®æ¥å£

**åˆ›å»ºåˆ†ç±»**
```http
POST /api/categories
Authorization: Bearer <token>
Content-Type: application/json

{
  "name": "åˆ†ç±»åç§°",
  "slug": "category-slug",
  "description": "åˆ†ç±»æè¿°",
  "color": "#FF5722",
  "icon": "icon-name",
  "parentId": 1
}
```

**è·å–åˆ†ç±»åˆ—è¡¨ï¼ˆå…¬å¼€ï¼‰**
```http
GET /api/categories
```

**ç®¡ç†å‘˜è·å–åˆ†ç±»åˆ—è¡¨**
```http
GET /api/categories/admin
Authorization: Bearer <token>
```

**è·å–åˆ†ç±»æ ‘ç»“æ„**
```http
GET /api/categories/tree
```

**æ ¹æ®åˆ«åè·å–åˆ†ç±»**
```http
GET /api/categories/slug/{slug}
```

**æ›´æ–°åˆ†ç±»**
```http
PATCH /api/categories/{id}
Authorization: Bearer <token>
Content-Type: application/json

{
  "name": "æ›´æ–°çš„åˆ†ç±»åç§°",
  "description": "æ›´æ–°çš„æè¿°"
}
```

### 5. è¯„è®ºç®¡ç†æ¨¡å— (Comments)

#### æ•°æ®æ¨¡å‹
```typescript
interface Comment {
  id: number;
  content: string;
  status: 'pending' | 'approved' | 'rejected';
  likeCount: number;
  ip: string;
  userAgent: string;
  author: User;
  blog: Blog;
  parent: Comment;
  replies: Comment[];
  createdAt: Date;
  updatedAt: Date;
}
```

#### å…³é”®æ¥å£

**åˆ›å»ºè¯„è®º**
```http
POST /api/comments
Authorization: Bearer <token>
Content-Type: application/json

{
  "content": "è¯„è®ºå†…å®¹",
  "blogId": 1,
  "parentId": 2  // å¯é€‰ï¼Œç”¨äºå›å¤
}
```

**è·å–è¯„è®ºåˆ—è¡¨**
```http
GET /api/comments?page=1&limit=10&blogId=1&status=approved
```

**ç®¡ç†å‘˜è·å–è¯„è®ºåˆ—è¡¨**
```http
GET /api/comments/admin?page=1&limit=10&status=pending
Authorization: Bearer <token>
```

**å®¡æ ¸è¯„è®º**
```http
POST /api/comments/{id}/approve
Authorization: Bearer <token>

POST /api/comments/{id}/reject
Authorization: Bearer <token>
```

**è¯„è®ºç‚¹èµ/å–æ¶ˆç‚¹èµ**
```http
POST /api/comments/{id}/like
DELETE /api/comments/{id}/like
```

### 6. äº‘å‡½æ•°ç®¡ç†æ¨¡å— (Cloud Functions)

#### æ•°æ®æ¨¡å‹
```typescript
interface CloudFunction {
  id: number;
  name: string;
  reference: string;
  description: string;
  type: 'json' | 'function';
  method: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'ALL';
  content: string;
  config: object;
  isPublic: boolean;
  timeout: number;
  headers: object;
  status: 'active' | 'inactive' | 'error';
  author: User;
  createdAt: Date;
  updatedAt: Date;
}
```

#### å…³é”®æ¥å£

**åˆ›å»ºäº‘å‡½æ•°**
```http
POST /api/cloud-functions
Authorization: Bearer <token>
Content-Type: application/json

{
  "name": "ä¸»é¢˜é…ç½®",
  "reference": "theme-config",
  "description": "ä¸»é¢˜é…ç½®æ•°æ®",
  "type": "json",
  "method": "GET",
  "content": "{\"theme\": \"dark\", \"primaryColor\": \"#1976d2\"}",
  "isPublic": true,
  "timeout": 5000
}
```

**è·å–äº‘å‡½æ•°åˆ—è¡¨**
```http
GET /api/cloud-functions?page=1&limit=10&type=json&method=GET&status=active
Authorization: Bearer <token>
```

**æ‰§è¡Œäº‘å‡½æ•°**
```http
GET /api/fn/{reference}
POST /api/fn/{reference}
# æˆ–è€…å¸¦è·¯å¾„å‚æ•°
GET /api/fn/{reference}/path/to/resource
```

**æ›´æ–°äº‘å‡½æ•°**
```http
PATCH /api/cloud-functions/{id}
Authorization: Bearer <token>
Content-Type: application/json

{
  "content": "æ›´æ–°çš„å†…å®¹",
  "status": "active"
}
```

### 7. æ–‡ä»¶ä¸Šä¼ æ¨¡å— (Upload)

#### æ•°æ®æ¨¡å‹
```typescript
interface File {
  id: number;
  originalName: string;
  filename: string;
  mimeType: string;
  size: number;
  formattedSize: string;
  type: 'image' | 'document' | 'video' | 'audio' | 'other';
  status: 'uploading' | 'completed' | 'failed' | 'deleted';
  metadata: object;
  thumbnailUrl: object;
  description: string;
  tags: string[];
  downloadCount: number;
  createdAt: Date;
  updatedAt: Date;
}
```

#### å…³é”®æ¥å£

**å•æ–‡ä»¶ä¸Šä¼ **
```http
POST /api/upload
Authorization: Bearer <token>
Content-Type: multipart/form-data

file: [æ–‡ä»¶]
description: "æ–‡ä»¶æè¿°"
tags: ["æ ‡ç­¾1", "æ ‡ç­¾2"]
generateThumbnail: true
```

**æ‰¹é‡æ–‡ä»¶ä¸Šä¼ **
```http
POST /api/upload/batch
Authorization: Bearer <token>
Content-Type: multipart/form-data

files: [æ–‡ä»¶1, æ–‡ä»¶2, ...]
description: "æ‰¹é‡ä¸Šä¼ "
tags: ["æ ‡ç­¾1"]
```

**è·å–æ–‡ä»¶åˆ—è¡¨**
```http
GET /api/upload?page=1&limit=20&type=image&status=completed&search=å…³é”®è¯&tag=æ ‡ç­¾
Authorization: Bearer <token>
```

**è·å–æ–‡ä»¶ç»Ÿè®¡**
```http
GET /api/upload/stats
Authorization: Bearer <token>
```

**ç”Ÿæˆä¸‹è½½é“¾æ¥**
```http
POST /api/upload/{id}/download-link
Authorization: Bearer <token>
```

**ç²˜è´´ä¸Šä¼ ï¼ˆå‰ªè´´æ¿ï¼‰**
```http
POST /api/upload/paste
Authorization: Bearer <token>
Content-Type: multipart/form-data

file: [å‰ªè´´æ¿æ–‡ä»¶]
description: "ç²˜è´´ä¸Šä¼ "
```

### 8. ç³»ç»Ÿç®¡ç†æ¨¡å— (System)

#### å…³é”®æ¥å£

**è·å–æ‰€æœ‰ç³»ç»Ÿè®¾ç½®**
```http
GET /api/system/settings
Authorization: Bearer <token>
```

**è·å–ç‰¹å®šè®¾ç½®**
```http
GET /api/system/settings/{key}
Authorization: Bearer <token>
```

**è®¾ç½®ç³»ç»Ÿé…ç½®**
```http
PUT /api/system/settings/{key}
Authorization: Bearer <token>
Content-Type: application/json

{
  "value": "é…ç½®å€¼",
  "type": "string"
}
```

**åˆå§‹åŒ–é»˜è®¤è®¾ç½®**
```http
POST /api/system/settings/initialize
Authorization: Bearer <token>
```

## æƒé™ç³»ç»Ÿ

### è§’è‰²ç±»å‹
- **admin**: è¶…çº§ç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™
- **editor**: ç¼–è¾‘è€…ï¼Œå¯ä»¥ç®¡ç†å†…å®¹
- **author**: ä½œè€…ï¼Œå¯ä»¥åˆ›å»ºå’Œç®¡ç†è‡ªå·±çš„å†…å®¹
- **user**: æ™®é€šç”¨æˆ·ï¼ŒåŸºç¡€æƒé™

### æƒé™èµ„æº
- **USER**: ç”¨æˆ·ç®¡ç†
- **BLOG**: åšå®¢ç®¡ç†
- **CATEGORY**: åˆ†ç±»ç®¡ç†
- **COMMENT**: è¯„è®ºç®¡ç†
- **CLOUD_FUNCTION**: äº‘å‡½æ•°ç®¡ç†
- **FILE**: æ–‡ä»¶ç®¡ç†
- **SYSTEM**: ç³»ç»Ÿç®¡ç†

### æƒé™æ“ä½œ
- **CREATE**: åˆ›å»º
- **READ**: è¯»å–
- **UPDATE**: æ›´æ–°
- **DELETE**: åˆ é™¤
- **MANAGE**: ç®¡ç†ï¼ˆåŒ…å«æ‰€æœ‰æ“ä½œï¼‰

## é”™è¯¯å¤„ç†

### å¸¸è§é”™è¯¯ç 
- **400**: è¯·æ±‚å‚æ•°é”™è¯¯
- **401**: æœªæˆæƒè®¿é—®
- **403**: æƒé™ä¸è¶³
- **404**: èµ„æºä¸å­˜åœ¨
- **409**: èµ„æºå†²çª
- **413**: æ–‡ä»¶è¿‡å¤§
- **429**: è¯·æ±‚è¿‡äºé¢‘ç¹
- **500**: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

### é”™è¯¯å“åº”æ ¼å¼
```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "è¯·æ±‚å‚æ•°éªŒè¯å¤±è´¥",
    "details": [
      {
        "field": "email",
        "message": "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"
      }
    ]
  },
  "timestamp": "2024-01-01T00:00:00.000Z"
}
```

## å¼€å‘å»ºè®®

### 1. è®¤è¯æµç¨‹
1. é¦–æ¬¡è®¿é—®æ—¶æ£€æŸ¥åšå®¢åˆå§‹åŒ–çŠ¶æ€ (`/api/auth/check-initialization`)
2. å¦‚æœæœªåˆå§‹åŒ–ï¼Œå¼•å¯¼ç”¨æˆ·è¿›è¡Œç®¡ç†å‘˜æ³¨å†Œ
3. ç”¨æˆ·ç™»å½•åè·å– access token å’Œ refresh token
4. åœ¨è¯·æ±‚æ‹¦æˆªå™¨ä¸­è‡ªåŠ¨æ·»åŠ  Authorization å¤´
5. åœ¨å“åº”æ‹¦æˆªå™¨ä¸­å¤„ç† token è¿‡æœŸï¼Œè‡ªåŠ¨åˆ·æ–°

### 2. çŠ¶æ€ç®¡ç†
å»ºè®®ä½¿ç”¨çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚ Zustandã€Redux Toolkitï¼‰ç®¡ç†ï¼š
- ç”¨æˆ·ä¿¡æ¯å’Œè®¤è¯çŠ¶æ€
- åšå®¢åˆ—è¡¨å’Œè¯¦æƒ…
- åˆ†ç±»æ ‘ç»“æ„
- ç³»ç»Ÿè®¾ç½®

### 3. æ•°æ®ç¼“å­˜
- å¯¹äºä¸ç»å¸¸å˜åŒ–çš„æ•°æ®ï¼ˆå¦‚åˆ†ç±»åˆ—è¡¨ã€ç³»ç»Ÿè®¾ç½®ï¼‰å¯ä»¥è¿›è¡Œæœ¬åœ°ç¼“å­˜
- ä½¿ç”¨ React Query æˆ– SWR è¿›è¡Œæ•°æ®è·å–å’Œç¼“å­˜ç®¡ç†

### 4. æ–‡ä»¶ä¸Šä¼ 
- æ”¯æŒæ‹–æ‹½ä¸Šä¼ 
- æ˜¾ç¤ºä¸Šä¼ è¿›åº¦
- æ”¯æŒå¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ 
- å›¾ç‰‡é¢„è§ˆå’Œè£å‰ªåŠŸèƒ½

### 5. å¯Œæ–‡æœ¬ç¼–è¾‘
- æ¨èä½¿ç”¨ TinyMCEã€Quill æˆ–è‡ªå®šä¹‰ Markdown ç¼–è¾‘å™¨
- æ”¯æŒå›¾ç‰‡ç²˜è´´å’Œæ‹–æ‹½æ’å…¥
- å®æ—¶é¢„è§ˆåŠŸèƒ½

### 6. å“åº”å¼è®¾è®¡
- é€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯
- ä½¿ç”¨ Tailwind CSS æˆ– Ant Design ç­‰ UI æ¡†æ¶

## ç¤ºä¾‹ä»£ç 

### TypeScript ç±»å‹å®šä¹‰
```typescript
// types/api.ts
export interface ApiResponse<T = any> {
  success: boolean;
  data?: T;
  error?: {
    code: string;
    message: string;
    details?: any[];
  };
  message?: string;
  timestamp: string;
}

export interface PaginatedResponse<T> {
  items: T[];
  total: number;
  page: number;
  limit: number;
  totalPages: number;
}

export interface User {
  id: number;
  email: string;
  username: string;
  nickname: string;
  avatar: string;
  bio: string;
  status: 'active' | 'inactive' | 'banned';
  roles: Role[];
  createdAt: string;
  updatedAt: string;
}

export interface Blog {
  id: number;
  title: string;
  slug: string;
  summary: string;
  content: string;
  coverImage: string;
  status: 'draft' | 'published' | 'archived';
  viewCount: number;
  likeCount: number;
  commentCount: number;
  isTop: boolean;
  allowComment: boolean;
  tags: string[];
  author: User;
  categories: Category[];
  publishedAt: string;
  createdAt: string;
  updatedAt: string;
}
```

### API å®¢æˆ·ç«¯å°è£…
```typescript
// utils/api.ts
import axios, { AxiosResponse } from 'axios';
import { ApiResponse } from '../types/api';

const api = axios.create({
  baseURL: process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000/api',
  timeout: 10000,
});

// è¯·æ±‚æ‹¦æˆªå™¨
api.interceptors.request.use((config) => {
  const token = localStorage.getItem('access_token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// å“åº”æ‹¦æˆªå™¨
api.interceptors.response.use(
  (response: AxiosResponse<ApiResponse>) => {
    return response;
  },
  async (error) => {
    if (error.response?.status === 401) {
      // Token è¿‡æœŸï¼Œå°è¯•åˆ·æ–°
      const refreshToken = localStorage.getItem('refresh_token');
      if (refreshToken) {
        try {
          const response = await api.post('/auth/refresh', {
            refreshToken,
          });
          const { accessToken } = response.data.data;
          localStorage.setItem('access_token', accessToken);
          // é‡è¯•åŸè¯·æ±‚
          return api.request(error.config);
        } catch (refreshError) {
          // åˆ·æ–°å¤±è´¥ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
          localStorage.removeItem('access_token');
          localStorage.removeItem('refresh_token');
          window.location.href = '/login';
        }
      }
    }
    return Promise.reject(error);
  }
);

export default api;
```

### åšå®¢ç®¡ç† Hook
```typescript
// hooks/useBlog.ts
import { useState, useEffect } from 'react';
import api from '../utils/api';
import { Blog, PaginatedResponse } from '../types/api';

export const useBlogList = (params: {
  page?: number;
  limit?: number;
  status?: string;
  search?: string;
}) => {
  const [blogs, setBlogs] = useState<PaginatedResponse<Blog> | null>(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const fetchBlogs = async () => {
    setLoading(true);
    setError(null);
    try {
      const response = await api.get('/blogs/admin', { params });
      setBlogs(response.data.data);
    } catch (err: any) {
      setError(err.response?.data?.error?.message || 'è·å–åšå®¢åˆ—è¡¨å¤±è´¥');
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchBlogs();
  }, [params.page, params.limit, params.status, params.search]);

  return { blogs, loading, error, refetch: fetchBlogs };
};

export const useCreateBlog = () => {
  const [loading, setLoading] = useState(false);

  const createBlog = async (blogData: Partial<Blog>) => {
    setLoading(true);
    try {
      const response = await api.post('/blogs', blogData);
      return response.data.data;
    } catch (error: any) {
      throw new Error(error.response?.data?.error?.message || 'åˆ›å»ºåšå®¢å¤±è´¥');
    } finally {
      setLoading(false);
    }
  };

  return { createBlog, loading };
};
```

## éƒ¨ç½²è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®
```env
# åº”ç”¨é…ç½®
APP_NAME=åšå®¢åç«¯ç³»ç»Ÿ
APP_PORT=3000
APP_HOST=0.0.0.0
APP_ENV=production

# æ•°æ®åº“é…ç½®
DB_TYPE=mysql
DB_HOST=localhost
DB_PORT=3306
DB_USERNAME=blog_user
DB_PASSWORD=your_password
DB_DATABASE=blog_db

# Redis é…ç½®
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# JWT é…ç½®
JWT_SECRET=your-super-secret-jwt-key
JWT_EXPIRES_IN=15m
JWT_REFRESH_SECRET=your-super-secret-refresh-key
JWT_REFRESH_EXPIRES_IN=7d

# OAuth é…ç½®
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# å‰ç«¯ URL
FRONTEND_URL=http://localhost:3001

# æ–‡ä»¶ä¸Šä¼ é…ç½®
UPLOAD_MAX_SIZE=10485760
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,image/webp

# é‚®ä»¶é…ç½®
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USER=your-email@gmail.com
MAIL_PASS=your-app-password
MAIL_FROM=your-email@gmail.com

# é™æµé…ç½®
THROTTLE_TTL=60
THROTTLE_LIMIT=100

# CORS é…ç½®
CORS_ORIGIN=http://localhost:3001,http://192.168.1.0:3001
```

### å¯åŠ¨å‘½ä»¤
```bash
# å¼€å‘ç¯å¢ƒ
npm run start:dev

# ç”Ÿäº§ç¯å¢ƒ
npm run build
npm run start:prod
```

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿæˆ–æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£ã€‚

---

**æ³¨æ„**: æœ¬æ–‡æ¡£åŸºäºå½“å‰ API ç‰ˆæœ¬ç¼–å†™ï¼Œå¦‚æœ‰æ›´æ–°è¯·åŠæ—¶åŒæ­¥æ–‡æ¡£å†…å®¹ã€‚